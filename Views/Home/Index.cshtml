@model gpxViewer.Models.GpxData
@{
    ViewBag.Title = "Home Page";
}

@using System.Web.Script.Serialization
@{
    var at = "@";

    var javaScriptSearilizer = new JavaScriptSerializer();
    var searializedLat = javaScriptSearilizer.Serialize(Model.Lat);
    var searializedLng = javaScriptSearilizer.Serialize(Model.Lng);
    var searializedDistances = javaScriptSearilizer.Serialize(Model.Distances);
    var searializedElevations = javaScriptSearilizer.Serialize(Model.Elevations);
}

@section scripts {
    
    <script src="https://unpkg.com/@(at)mapbox/mapbox-sdk/umd/mapbox-sdk.min.js"></script>
    <script type='text/javascript' src='~/config.js'></script>
    <script src="~/Scripts/Site.js" type="text/javascript"></script>

    <script src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=BING_KEY&setLang=en'
            async defer></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
          integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
          crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
            crossorigin=""></script>
    <script defer src="https://maps.googleapis.com/maps/api/js?&callback=initMap&language=en"
            type="text/javascript"></script>

    <script>
        setLatLng(@Html.Raw(searializedLat), @Html.Raw(searializedLng));
        setChartData(@Html.Raw(searializedDistances), @Html.Raw(searializedElevations), "@gpxViewer.Resources.Resource.Distance", "@gpxViewer.Resources.Resource.Elevation");
    </script>
}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
<script src="~/Scripts/site.js" type="text/javascript"></script>

<div class="row" id="mainRow">
    <div id="container" class="col-lg-2">
        <form method="post" enctype="multipart/form-data" asp-controller="Data" asp-action="ImportAdditionalCodes">
            <div id="uploadFileDiv" class="form-group">
                <label class="bold" id="fileNameLabel"></label>
                <label id="chooseFile" for="chooseInput" class="btn btn-primary">@gpxViewer.Resources.Resource.ChooseFile</label>
                <input accept='.gpx' id="chooseInput" type="file" name="file" style="display: none">

            </div>
            <div class="form-group">
                <input class="btn btn-primary" type="submit" value="@gpxViewer.Resources.Resource.Send">
                <div class="bold" id="tempData">@TempData["Message"]</div>
            </div>
        </form>
        <p id="chooseMap" class="bold">@gpxViewer.Resources.Resource.ChooseMap</p>
        <p id="dropDownList">@Html.DropDownList("maps", null, new { onchange = "selectedMap(this.value)", @class = "form-control" })</p>

        <div id="detailsDataIndex" class="form-group">
            <p class="bold"> @gpxViewer.Resources.Resource.Name: <div class="inline"> @Html.DisplayFor(model => model.Name)</div> </p>
            <p class="bold"> @gpxViewer.Resources.Resource.Distance: <div class="inline"> @Html.DisplayFor(model => model.Distance) km</div> </p>
            <p class="bold"> @gpxViewer.Resources.Resource.Time: <div class="inline">@Html.DisplayFor(model => model.Time)</div></p>
            <p class="bold"> @gpxViewer.Resources.Resource.Elevation: <div class="inline">@Html.DisplayFor(model => model.Elevation) m</div></p>
        </div>
    </div>

    <div class="col-lg-10">
        <div class="map" id="bingMap"></div>
        <div class="map" id="googleMap"></div>
        <div class="map" id="openStreetMap"></div>
    </div>

    <div class="col-lg-12" id="chartDiv"><canvas id="elevationChart" style="width:100%; height:180px;"></canvas></div>


</div>