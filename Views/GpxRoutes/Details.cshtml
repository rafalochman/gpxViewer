@model gpxViewer.Models.GpxData
@{
    ViewBag.Title = "Home Page";
}

@using System.Web.Script.Serialization
@{
    var javaScriptSearilizer = new JavaScriptSerializer();
    var searializedLat = javaScriptSearilizer.Serialize(Model.Lat);
    var searializedLng = javaScriptSearilizer.Serialize(Model.Lng);
    var searializedDistances = javaScriptSearilizer.Serialize(Model.Distances);
    var searializedElevations = javaScriptSearilizer.Serialize(Model.Elevations);
}

@section scripts {
    <script type='text/javascript' src='~/Configs/config.js'></script>
    <script src="~/Scripts/Site.js" type="text/javascript"></script>

    <script src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=BING_KEY&setLang=en'
            async defer></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
          integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
          crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
            crossorigin=""></script>
    <script defer src="https://maps.googleapis.com/maps/api/js?&callback=initMap&language=en"
            type="text/javascript"></script>

    <script>
        setLatLng(@Html.Raw(searializedLat), @Html.Raw(searializedLng));
        setChartData(@Html.Raw(searializedDistances), @Html.Raw(searializedElevations), "@gpxViewer.Resources.Resource.Distance", "@gpxViewer.Resources.Resource.Elevation");
    </script>
}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
<script src="~/Scripts/site.js" type="text/javascript"></script>


<div class="row" id="mainRow">
    <div id="container" class="col-lg-2">
        <p id="chooseMap" class="bold">@gpxViewer.Resources.Resource.ChooseMap</p>
        <p id="dropDownList">@Html.DropDownList("maps", null, new { onchange = "selectedMap(this.value)", @class = "form-control" })</p>

        <div id="detailsData" class="form-group">
            <p class="bold"> @gpxViewer.Resources.Resource.Distance: <div class="inline"> @Model.Distance km</div> </p>
            <p class="bold"> @gpxViewer.Resources.Resource.Time: <div class="inline">@Model.Time</div></p>
            <p class="bold"> @gpxViewer.Resources.Resource.Elevation: <div class="inline">@Model.Elevation m</div></p>
            <p class="bold"> @gpxViewer.Resources.Resource.Date: <div class="inline">@Model.SentDate</div></p>
        </div>

        <p>@Html.ActionLink(@gpxViewer.Resources.Resource.Edit, "Edit", "GpxRoutes", new { id = ViewBag.id }, new { @class = "btn btn-default" })</p>

        <p>@Html.ActionLink(@gpxViewer.Resources.Resource.Delete, "Delete", "GpxRoutes", new { id = ViewBag.id }, new { @class = "btn btn-default" })</p>

        <p>@Html.ActionLink(@gpxViewer.Resources.Resource.Back, null, null, null, new { href = Request.UrlReferrer })</p>

    </div>

    <div class="col-lg-10">
        <div class="map" id="bingMap"></div>
        <div class="map" id="googleMap"></div>
        <div class="map" id="openStreetMap"></div>
    </div>

    <div class="col-lg-12" id="chartDiv"><canvas id="elevationChart" style="width:100%; height:180px;"></canvas></div>
</div>